<!DOCTYPE html>
<html>
<head>
  <title>ë°”ë‚˜ë‚˜ íˆì–´ë¡œì˜ ëª¨í—˜ - p5.js</title>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/p5.js/1.7.0/p5.min.js"></script>
  <style>
    body { 
      margin: 0; 
      display: flex; 
      justify-content: center; 
      align-items: center; 
      height: 100vh; 
      background: #f0f0f0;
    }
  </style>
</head>
<body>
  <script>
    // ğŸ® ê²Œì„ ë³€ìˆ˜ë“¤
    let hero;
    let bananas = [];
    let enemies = [];
    let score = 0;
    let gameOver = false;

    // ğŸ¨ ì´ˆê¸° ì„¤ì •
    function setup() {
      createCanvas(800, 400);
      
      // ì£¼ì¸ê³µ ìƒì„±
      hero = {
        x: 100,
        y: 300,
        size: 50,
        velocityY: 0,
        isJumping: false
      };
    }

    // ğŸ”„ ê²Œì„ ë£¨í”„ (ë§¤ í”„ë ˆì„ë§ˆë‹¤ ì‹¤í–‰)
    function draw() {
      // ë°°ê²½
      background(135, 206, 235); // í•˜ëŠ˜ìƒ‰
      
      // ë•…
      fill(34, 139, 34); // ì´ˆë¡ìƒ‰
      rect(0, 350, width, 50);
      
      // ê²Œì„ ì˜¤ë²„ ì²´í¬
      if (gameOver) {
        textSize(48);
        fill(255, 0, 0);
        textAlign(CENTER);
        text("GAME OVER", width/2, height/2);
        textSize(24);
        text("Press R to restart", width/2, height/2 + 50);
        return;
      }
      
      // ì£¼ì¸ê³µ ì—…ë°ì´íŠ¸
      updateHero();
      drawHero();
      
      // ë°”ë‚˜ë‚˜ ì—…ë°ì´íŠ¸
      updateBananas();
      
      // ì  ì—…ë°ì´íŠ¸
      updateEnemies();
      
      // ì¶©ëŒ ì²´í¬
      checkCollisions();
      
      // ì ìˆ˜ í‘œì‹œ
      textSize(24);
      fill(0);
      textAlign(LEFT);
      text("Score: " + score, 10, 30);
    }

    // ğŸƒ ì£¼ì¸ê³µ ì›€ì§ì„
    function updateHero() {
      // ì¢Œìš° ì´ë™
      if (keyIsDown(LEFT_ARROW) && hero.x > 0) {
        hero.x -= 5;
      }
      if (keyIsDown(RIGHT_ARROW) && hero.x < width - hero.size) {
        hero.x += 5;
      }
      
      // ì í”„
      if (keyIsDown(32) && !hero.isJumping) { // ìŠ¤í˜ì´ìŠ¤ë°”
        hero.velocityY = -15;
        hero.isJumping = true;
      }
      
      // ì¤‘ë ¥
      hero.velocityY += 0.8;
      hero.y += hero.velocityY;
      
      // ë°”ë‹¥ ì²´í¬
      if (hero.y > 300) {
        hero.y = 300;
        hero.velocityY = 0;
        hero.isJumping = false;
      }
    }

    // ğŸµ ì£¼ì¸ê³µ ê·¸ë¦¬ê¸°
    function drawHero() {
      // ëª¸í†µ
      fill(139, 69, 19);
      rect(hero.x, hero.y, hero.size, hero.size);
      
      // ì–¼êµ´
      fill(255, 215, 0);
      circle(hero.x + hero.size/2, hero.y + hero.size/2 - 10, 30);
      
      // ëˆˆ
      fill(0);
      circle(hero.x + hero.size/2 - 8, hero.y + hero.size/2 - 15, 5);
      circle(hero.x + hero.size/2 + 8, hero.y + hero.size/2 - 15, 5);
    }

    // ğŸŒ ë°”ë‚˜ë‚˜ ì—…ë°ì´íŠ¸
    function updateBananas() {
      // ë°”ë‚˜ë‚˜ ì´ë™ ë° ê·¸ë¦¬ê¸°
      for (let i = bananas.length - 1; i >= 0; i--) {
        let banana = bananas[i];
        banana.x += 10;
        
        // ë°”ë‚˜ë‚˜ ê·¸ë¦¬ê¸°
        fill(255, 255, 0);
        rect(banana.x, banana.y, 20, 10);
        
        // í™”ë©´ ë°–ìœ¼ë¡œ ë‚˜ê°€ë©´ ì œê±°
        if (banana.x > width) {
          bananas.splice(i, 1);
        }
      }
    }

    // ğŸ‘¹ ì  ì—…ë°ì´íŠ¸
    function updateEnemies() {
      // 3ì´ˆë§ˆë‹¤ ì  ìƒì„±
      if (frameCount % 180 === 0) {
        enemies.push({
          x: width,
          y: 300,
          size: 40,
          isSlipping: false
        });
      }
      
      // ì  ì´ë™ ë° ê·¸ë¦¬ê¸°
      for (let i = enemies.length - 1; i >= 0; i--) {
        let enemy = enemies[i];
        
        if (enemy.isSlipping) {
          enemy.x += 5; // ë¯¸ë„ëŸ¬ì§
          fill(255, 165, 0); // ì£¼í™©ìƒ‰
        } else {
          enemy.x -= 3; // ì¼ë°˜ ì´ë™
          fill(255, 0, 0); // ë¹¨ê°„ìƒ‰
        }
        
        rect(enemy.x, enemy.y, enemy.size, enemy.size + 10);
        
        // í™”ë©´ ë°–ìœ¼ë¡œ ë‚˜ê°€ë©´ ì œê±°
        if (enemy.x < -enemy.size || enemy.x > width) {
          enemies.splice(i, 1);
        }
      }
    }

    // ğŸ’¥ ì¶©ëŒ ì²´í¬
    function checkCollisions() {
      // ë°”ë‚˜ë‚˜ì™€ ì  ì¶©ëŒ
      for (let i = bananas.length - 1; i >= 0; i--) {
        for (let j = enemies.length - 1; j >= 0; j--) {
          let banana = bananas[i];
          let enemy = enemies[j];
          
          if (banana.x < enemy.x + enemy.size &&
              banana.x + 20 > enemy.x &&
              banana.y < enemy.y + enemy.size + 10 &&
              banana.y + 10 > enemy.y) {
            
            enemy.isSlipping = true;
            bananas.splice(i, 1);
            score += 10;
            
            // 1ì´ˆ í›„ ì  ì œê±°
            setTimeout(() => {
              let index = enemies.indexOf(enemy);
              if (index > -1) enemies.splice(index, 1);
            }, 1000);
            
            break;
          }
        }
      }
      
      // ì£¼ì¸ê³µê³¼ ì  ì¶©ëŒ
      for (let enemy of enemies) {
        if (!enemy.isSlipping &&
            hero.x < enemy.x + enemy.size &&
            hero.x + hero.size > enemy.x &&
            hero.y < enemy.y + enemy.size + 10 &&
            hero.y + hero.size > enemy.y) {
          gameOver = true;
        }
      }
    }

    // âŒ¨ï¸ í‚¤ ì…ë ¥
    function keyPressed() {
      // Zí‚¤ë¡œ ë°”ë‚˜ë‚˜ ë˜ì§€ê¸°
      if (key === 'z' || key === 'Z') {
        bananas.push({
          x: hero.x + hero.size,
          y: hero.y + hero.size/2
        });
      }
      
      // Rí‚¤ë¡œ ì¬ì‹œì‘
      if (key === 'r' || key === 'R') {
        if (gameOver) {
          gameOver = false;
          score = 0;
          enemies = [];
          bananas = [];
          hero.x = 100;
          hero.y = 300;
        }
      }
    }
  </script>
</body>
</html>